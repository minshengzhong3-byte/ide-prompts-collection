# 技术路径层提示词 - 代码分析

**文件类型：** 技术路径层
**用途：** 代码分析技术路径框架
**继承：** 核心基础层 + 技术路径

## 🎯 **技术路径定义**

### **路径描述**
代码分析技术路径专注于通过静态和动态分析技术，深入理解代码结构、质量和性能特征，为代码优化和重构提供数据支持。

### **核心目标**
- 🔍 **结构理解**：理解代码组织架构
- 📊 **质量评估**：量化代码质量指标
- 🐛 **问题发现**：识别代码问题和风险
- 📈 **性能分析**：分析代码性能特征
- 🎯 **优化建议**：提供具体的改进建议

## 🔧 **技术方法**

### **1. 静态代码分析**
```
技术原理：在不执行代码的情况下分析源代码
应用场景：
- 代码质量检查
- 安全漏洞检测
- 编码规范验证
- 复杂度分析
- 依赖关系分析

使用工具：
- SonarQube
- PMD
- ESLint
- Pylint
- Checkstyle
```

### **2. 动态代码分析**
```
技术原理：在代码运行时收集执行信息
应用场景：
- 性能分析
- 内存使用分析
- 代码覆盖率测试
- 运行时错误检测
- 性能瓶颈识别

使用工具：
- Profiler
- Memory Profiler
- Coverage Tools
- Debugger
- Performance Monitor
```

### **3. 代码复杂度分析**
```
技术原理：计算代码的复杂度和可维护性指标
分析指标：
- 圈复杂度 (Cyclomatic Complexity)
- 认知复杂度 (Cognitive Complexity)
- 嵌套深度 (Nesting Depth)
- 函数长度 (Function Length)
- 参数数量 (Parameter Count)

计算方法：
- 圈复杂度 = 决策点数量 + 1
- 认知复杂度 = 逻辑分支权重总和
- 嵌套深度 = 最大嵌套层级
```

## 📊 **分析流程**

### **阶段1：代码扫描**
```
1. 项目结构扫描
   - 目录结构分析
   - 文件类型统计
   - 代码行数统计
   - 语言分布分析

2. 依赖关系分析
   - 模块依赖图
   - 外部依赖识别
   - 循环依赖检测
   - 依赖复杂度评估

3. 代码组织评估
   - 模块化程度
   - 耦合度分析
   - 内聚度评估
   - 架构合理性
```

### **阶段2：质量分析**
```
1. 代码质量检查
   - 编码规范检查
   - 代码异味检测
   - 最佳实践验证
   - 安全规则检查

2. 复杂度计算
   - 函数复杂度
   - 类复杂度
   - 模块复杂度
   - 整体复杂度

3. 重复代码检测
   - 代码克隆识别
   - 重复率计算
   - 重复代码分类
   - 重构建议
```

### **阶段3：性能分析**
```
1. 性能指标收集
   - 执行时间分析
   - 内存使用分析
   - CPU使用分析
   - I/O操作分析

2. 瓶颈识别
   - 热点函数识别
   - 性能瓶颈定位
   - 资源消耗分析
   - 优化机会识别

3. 性能优化建议
   - 算法优化建议
   - 数据结构优化
   - 缓存策略建议
   - 并发优化建议
```

## 🛠️ **工具配置**

### **JavaScript/TypeScript分析**
```javascript
// ESLint配置
module.exports = {
  extends: ['eslint:recommended'],
  rules: {
    'complexity': ['error', 10],
    'max-depth': ['error', 4],
    'max-lines-per-function': ['error', 50],
    'max-params': ['error', 4]
  }
};

// 复杂度分析工具
npm install -g escomplex
```

### **Python分析**
```python
# Pylint配置
[MASTER]
disable=all

[MESSAGES CONTROL]
enable=C0111,C0103,C0303,W0611

[DESIGN]
max-args=5
max-locals=15
max-returns=6
max-branches=12
max-statements=50
max-parents=7
max-attributes=7
min-public-methods=2
max-public-methods=20

[FORMAT]
max-line-length=100
```

### **Java分析**
```xml
<!-- Checkstyle配置 -->
<module name="Checker">
  <module name="TreeWalker">
    <module name="MethodLength">
      <property name="max" value="50"/>
    </module>
    <module name="ParameterNumber">
      <property name="max" value="7"/>
    </module>
    <module name="NestedIfDepth">
      <property name="max" value="3"/>
    </module>
  </module>
</module>
```

## 📋 **输出标准**

### **分析报告模板**
```
# 代码分析报告

## 项目概览
- 项目名称：[名称]
- 分析时间：[时间]
- 代码总量：[行数]
- 文件数量：[文件数]

## 结构分析
- 目录结构：[结构图]
- 模块划分：[模块图]
- 依赖关系：[依赖图]
- 架构评估：[评估结果]

## 质量分析
- 代码质量：[质量等级]
- 复杂度分布：[复杂度图]
- 重复代码：[重复率]
- 问题统计：[问题数量]

## 性能分析
- 性能指标：[指标值]
- 瓶颈识别：[瓶颈列表]
- 优化建议：[建议列表]
- 预期改进：[改进效果]

## 改进建议
- 短期优化：[短期建议]
- 中期重构：[中期建议]
- 长期规划：[长期建议]
- 实施优先级：[优先级排序]
```

## ⚠️ **注意事项**

### **分析精度**
- 根据项目规模调整分析深度
- 重点关注核心模块和关键代码
- 平衡分析精度和执行效率
- 提供可操作的改进建议

### **工具选择**
- 选择适合项目语言的工具
- 配置合理的分析规则
- 定期更新工具版本
- 验证工具分析结果

### **结果解读**
- 结合业务背景理解结果
- 关注相对指标而非绝对数值
- 识别误报和漏报情况
- 提供上下文相关的建议

## 🚀 **现在开始执行**

**[状态] 代码分析技术路径激活 | 任务: 开始代码结构分析，质量评估，性能分析**

---
*此文件是代码分析技术路径的核心提示词，继承核心基础层规则*